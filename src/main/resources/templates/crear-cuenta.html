<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear cuenta</title>

    <link rel="icon" th:href="@{/components/logo-ico.png}" >

    <!--  META-TAGS DE COMPARTIR ENLACE  -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://valenap-utn.github.io/landing-page-dds/index.html" />
    <meta property="og:title" content="MetaMapa" />
    <!--    <meta property="og:description" content="MetaMapa | Página principal" />-->
    <meta property="og:image" content="../components/logo-mm.png" />

    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:ital,wght@0,100..900;1,100..900&family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Lexend:wght@100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">


    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link th:href="@{/css/styles-crear-cuenta.css}" rel="stylesheet">

    <!-- Iconos -->
    <script src="https://kit.fontawesome.com/d4dda767ac.js" crossorigin="anonymous"></script>
</head>
<body>

    <section class="mm-form-wrap">
        <div class="mm-card">
            <h1 class="mm-form-title">Crear cuenta</h1>
            <p class="mm-form-sub">Completá tus datos para empezar a utilizar MetaMapa</p>

            <!-- Para detectar errores -->
            <div class="alert alert-danger" role="alert" th:if="${param.error}">
              <span th:switch="${param.error}">
                <span th:case="'email_taken'">Ese email ya está registrado.</span>
                <span th:case="'invalid_form'">Revisá los datos del formulario.</span>
                <span th:case="*">No pudimos crear tu cuenta. Intentá de nuevo.</span>
              </span>
            </div>
            <div class="alert alert-success" th:if="${param.ok}">Cuenta creada…</div>

            <!--            <form id="form-usuario" class="mm-form" novalidate>-->
            <form method="post" th:action="@{/auth/register}" th:object="${cuenta}"  >
                <!-- Alertas -->
                <div id="formAlert" class="alert alert-danger d-none" role="alert"></div>

                <!-- Progreso -->
                <ol class="mm-steps" role="list" aria-label="Progreso">
                    <li class="is-active" data-step="1"><span>Rol</span></li>
                    <li data-step="2"><span>Datos personales</span></li>
                </ol>
                <div class="mm-progress" aria-hidden="true">
                    <div class="mm-progress__bar" id="progressBar" style="width: 50%"></div>
                </div>

                <!-- PASO 1: Elegir rol -->
                <section class="mm-step is-active" data-step="1" aria-labelledby="step1-title">
                    <h2 id="step1-title" class="visually-hidden">Elegí tu rol</h2>

                    <div id="seccionDeRoles" class="mm-grid">
                        <div class="mm-field" style="padding: 10px 10px">
                            <label for="rolAdministrador" class="mm-label">Administrador
                                <input id="rolAdministrador" type="radio" th:field="*{rol}" value="administrador" style="margin: 0 0 0 10px; padding: 10px 10px ">
                            </label>
                        </div>
                        <div class="mm-field" style="padding: 10px 10px">
                            <label for="rolContribuyente" class="mm-label">Contribuyente
                                <input id="rolContribuyente" type="radio" th:field="*{rol}" value="contribuyente" style="margin: 0 0 0 10px; padding: 10px 10px "/>
                            </label>
                        </div>
                    </div>

                    <div class="mm-actions mt-3">
                        <a th:href="@{/iniciar-sesion}" class="mm-btn mm-btn-ghost">
                            <span class="arrow"><i class="fa-solid fa-arrow-left"></i></span>
                        </a>
                        <button type="button" id="btnNext1" class="mm-btn mm-btn-primary" disabled>
                            <span class="arrow"><i class="fa-solid fa-arrow-right"></i></span>
                        </button>
                    </div>
                </section>

                <!-- PASO 2: Completar con Datos Personales -->
                <section class="mm-step" data-step="2" aria-labelledby="seccionDatosCrearCuenta">
                    <h2 id="seccionDatosCrearCuenta" class="visually-hidden">Completá con tus datos personales</h2>

                    <div class="mm-grid">
                        <div class="mm-field mm-col-span-all">
                            <label for="email" class="mm-label">Email</label>
                            <input id="email" th:field="*{email}" type="email" class="mm-input" placeholder="tu@correo.com" required>
                        </div>

                        <div class="mm-field mm-col-span-all">
                            <label for="password" class="mm-label">Contraseña</label>
                            <input id="password" th:field="*{password}" type="password" class="mm-input" minlength="8" required>
                        </div>

                        <div class="mm-field mm-col-span-all">
                            <label for="nombre" class="mm-label">Nombre<span class="visually-hidden">(obligatorio)</span></label>
                            <input id="nombre" th:field="*{nombre}" type="text" class="mm-input" placeholder="Tu nombre" required aria-label="Ingresar nombre">
                        </div>

                        <div class="mm-field">
                            <label for="apellido" class="mm-label">Apellido</label>
                            <input id="apellido" th:field="*{apellido}" type="text" class="mm-input" placeholder="Tu apellido" required aria-label="Ingresar apellido">
                        </div>

                        <div class="mm-field">
                            <label for="fechaDeNacimiento" class="mm-label">Fecha de nacimiento</label>
                            <input id="fechaDeNacimiento" th:field="*{fechaDeNacimiento}" type="date" class="mm-input" placeholder="Ejemplo: 19/11/2024" required>
                        </div>
                    </div>

                    <div class="mm-actions">
<!--                        <a href="./iniciar-sesion.html" class="mm-btn mm-btn-ghost"><span class="arrow"><i class="fa-solid fa-arrow-left"></i></span>  Volver</a>-->
                        <button type="button" id="btnPrev2" class="mm-btn mm-btn-ghost">
                            <span class="arrow"><i class="fa-solid fa-arrow-left"></i></span>
                        </button>
                        <button type="submit" class="mm-btn mm-btn-primary">Crear cuenta</button>
                    </div>
                </section>
            </form>
        </div>
    </section>

    <script th:src="@{/js/commons.js}"></script>
    <script th:src="@{/js/crear-cuenta.js}"></script>

</body>
</html>